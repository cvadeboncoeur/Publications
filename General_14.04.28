metan  wc_all  wc_all_sd_se, lcols(author year length n) sortby(year) random astext(70) textsize(105) boxsca(90) xlabel(-0.5,4) notable xsize(10) ysize(6) favours(Weight loss (kg) # Weight gain (kg))
metan  wc_all  wc_all_sd_se, wgt(n) lcols(author year length n) sortby(year) astext(70) textsize(105) boxsca(90) xlabel(-0.5,4) notable xsize(10) ysize(6) favours(Weight loss # Weight gain)
label define locationl 1"USA" 2"Canada" 3"UK" 4"Belgium"
label values location locationl
metan  wc_all  wc_all_sd_se, by(location) random  lcols(author year length n) sortby(year) astext(70) textsize(105) boxsca(90) xlabel(-0.5,4) notable xsize(10) ysize(6) favours(Weight loss # Weight gain)

#sum
tabstat n, stat(sum)

#imputedSES_correlationCalculated
metan  wc_all   all_ses_corr, lcols(author year length n) sortby(year) random astext(70) textsize(130) boxsca(96) xlabel(-2,4) notable xsize(10) ysize(6) favours(Weight loss # Weight gain)
metan  wc_all   all_ses_corr, wgt(n) lcols(author year length n) sortby(year) astext(70) textsize(130) boxsca(96) xlabel(-2,4) notable xsize(10) ysize(6) favours(Weight loss # Weight gain)

#imputedSE_0.5correlation
metan  wc_all    all_ses_05, lcols(author year length n) sortby(year) random astext(70) textsize(130) boxsca(96) xlabel(-2,4) notable xsize(10) ysize(6) favours(Weight loss # Weight gain)
metan  wc_all    all_ses_05, wgt(n) lcols(author year length n) sortby(year) astext(70) textsize(130) boxsca(96) xlabel(-2,4) notable xsize(10) ysize(6) favours(Weight loss # Weight gain)


#female vs male
label define fmonly1 1"females" 2"males"
label values fmonly fmonly1
metan   wc_gender wc_gender_sd_se, by(fmonly) random  lcols(author year length n) sortby(year) astext(60) textsize(140) boxsca(70) xlabel(-0.5,4) notable xsize(10) ysize(6) favours(Weight loss # Weight gain)

#Time points
keep
gen length2 =""
replace length2 = "Length, < 4 months" if length <=4
replace length2 = "Length,  4-8 months" if length >4
label var length2 = "Length Follow-Up"
metan  wc_all  wc_all_sd_se, by(length2) lcols(author year length n) sortby(year) random astext(70) textsize(105) boxsca(90) xlabel(-0.5,4) notable xsize(10) ysize(6) favours(Weight loss # Weight gain)

#Method
label define lab_measured 1"Third person measured" 2"Self-Report"
label values lab_measured lab_measured
metan  wc_all  wc_all_sd_se, by(lab_measured) random lcols(author year length n) sortby(year) astext(70) textsize(105) boxsca(90) xlabel(-0.5,4) notable xsize(10) ysize(6) favours(Weight loss # Weight gain)


#funnel plot complete + imputed
metafunnel  wc_all wc_all_sd_se, xlab(.4 .6 .8 1 1.2 1.5 2 3) xtitle (Weight Change)
metafunnel  wc_all  all_ses_corr, xlab(.4 .6 .8 1 1.2 1.5 2 3) xtitle (Weight Change)
# galbr
galbr  wc_all wc_all_sd_se, xlab id(author)
galbr  wc_all  all_ses_corr, xlab id(author)

#mean weight gain
mean  Cent_WG_Final
metan  mean_wg mean_wg_sd_se, random lcols(author year cent_wg)sortby(year) astext(90) textsize(145) boxsca(110) xlabel(0,5.5) notable xsize(15) ysize(8)

#plt
graph twoway scatter  wc_all length

#Meta Reg
metareg wc_all  length, wsse( wc_all_sd_se)
metareg wc_all retention, wsse( wc_all_sd_se) graph
metareg wc_all   n, wsse( wc_all_sd_se) graph
xi: metareg wc_all i.lab_measured, wsse( wc_all_sd_se) graph


#wilcox
ranksum a, by(b)

#Quality
gen qual= ""
replace qual = "high" if total >=6
replace qual = "med" if total <=5
replace qual = "low" if total <=3

#Time points
keep
gen length2 =""
replace length2 = "Length, < 4 months" if length <=4
replace length2 = "Length,  4-8 months" if length >4
label var length2 = "Length Follow-Up"
metan  wc_all  wc_all_sd_se, by(length2) lcols(author year length n) sortby(year) random astext(70) textsize(105)

keep
gen rent2=""
replace rent2="80" if retention >=80
replace rent2= "less" if retention <80
tab rent2
